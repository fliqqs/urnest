snmp/README.txt stuff

Int,Float add operator* operator/
Float add math functions exp, sqrt, log, floor, ceiling etc

x Thread

io::Input
io::Output
  - pure interfaces
  - pair<std::set<ref<Input>>,std::set<ref<Output>>> 
      io::select(std::set<ref<Input>>,std::set<ref<Output>>,Time until)
  - close on exec? only ever make stdin,stdout,stderr survive exec (and always)
  - other fd and socket options? eg udp Don't Fragment, use constructed objects
  - dup2, perhaps:
    IStream::useAsStdin, OStream::useAsStdout, OStream::useAsStderr

- io
  - InFile
  - OutFile
  - InOutFile?
  - TCPListener
  - TCPSocket
      - IStream& input()
        - is a Input
        - size_t read(void* buffer, size_t bytes, Time until);
      - OStream& output()
        - is a Output
        - size_t write(void* buffer, size_t bytes, Time until);
  - UDPSocket
      IQueue& input();
        - is a Input
        - size_t deque(void* message, size_t bytes, Time deadline);
      OQueue& output();
        - void enque(void const* message, size_t bytes, Time deadline);
        - is a Output

  x pipe()
  - SocketPair
      - unique_ptr<IStream> input_;
      - unique_ptr<OStream> output_;
  - UnixListener,UnixSocket - like TCPListener,TCPSocket
  - MessageQueue (linux allows select)
      IQueue& input();
      OQueue& input();
x test-pipe.cc:
  x only tests creation
- test-io.cc:
  - use Pipe to test read/write
    x read already available
    x read no timeout
    x read timeout
    x close before timeout
    x write timeout
  - use multiple pipes to test select
- make syscall turn ENOMEM into std::bad_alloc
- move eg unistd functions into eg xju::unistd:: to allow higher level implementations (eg see pipe)
- move xju::SyscallFailed to SyscallFailed.hh

Subprocess
  x start function object,
  x optional stop function object (pass pid) - default kill 9
  x exit status
  - test scenarios
    - process output before destroy -> wait exit
    - exception processing -> kill

unit testing
  generic stub that captures calls, so can do test like:
    Stub<Y> y;
    X x(y);
    auto call = ut.call(x,&X::f,3,2);
    stub.calls_.awaitCall(y,&Y::g,Duration(3,0))->validateParams(3)->return_(6);
    call.awaitResult(Duration(3))->verify(3*2-2);


gcc 5.2.0:

  504  xzcat gmp-6.0.0a.tar.xz | tar xf -
  505  xzcat mpfr-3.1.3.tar.xz | tar xf -
  508  gunzip -c mpc-1.0.3.tar.gz | tar xf -
  514  cd gmp-6.0.0
  515  ./configure --prefix=/home/xju/gcc-5.2.0-run
  516  make && make install
  517  make check
  521  cd ../mpfr-3.1.3
  524  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib ./configure --with-gmp=/home/xju/gcc-5.2.0-run prefix=/home/xju/gcc-5.2.0-run
  525  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make && LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make install
  526  cd ../mpc-1.0.3
  528  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib ./configure --with-gmp=/home/xju/gcc-5.2.0-run --with-mpfr=/home/xju/gcc-5.2.0-run prefix=/home/xju/gcc-5.2.0-run
  529  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make && LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make install
  530  cd ../gcc-5.2.0
  533  sudo aptitude install zip
  531  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib ./configure --with-gmp=/home/xju/gcc-5.2.0-run --with-mpfr=/home/xju/gcc-5.2.0-run -with-mpc=/home/xju/gcc-5.2.0-run prefix=/home/xju/gcc-5.2.0-run --disable-multilib
  536  LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make && LD_LIBRARY_PATH=/home/xju/gcc-5.2.0-run/lib make install
