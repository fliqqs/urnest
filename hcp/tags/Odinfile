%all.idl.sm==<<
DirName.idl
AbsolutePath.idl
FileName.idl
LineNumber.idl
UnqualifiedSymbol.idl
Lookup.idl
NamespaceName.idl
Location.idl

%gen==(%all.idl.sm)+inc_sp=(../..)+hcp-split=(../hcp-split)+hpath='hcp/tags'+cxy='-exju::Exception=xju/Exception.hh':omnicxy

%geninc.vir_tree_spec==<<
hcp/tags==.%gen

%cxx-opts==<<
+debug
+inc_sp=(../..)
+inc_sp=(../../omnicxy)
+inc_sp=(%geninc.vir_tree_spec:vir_tree)
+ld_flags=-lpthread

# below override idl-generated code, redirecting to xju::path types
#
%DirName==()+cmd=(../hcp-split) -l 2 (DirName.hcp) 'DirName.hh' 'DirName.cc':output

DirName.hh==%DirName/DirName.hh
DirName.cc==%DirName/DirName.cc

%AbsolutePath==()+cmd=(../hcp-split) -l 2 (AbsolutePath.hcp) 'AbsolutePath.hh' 'AbsolutePath.cc':output

AbsolutePath.hh==%AbsolutePath/AbsolutePath.hh
AbsolutePath.cc==%AbsolutePath/AbsolutePath.cc

%RelativePath==()+cmd=(../hcp-split) -l 2 (RelativePath.hcp) 'RelativePath.hh' 'RelativePath.cc':output

RelativePath.hh==%RelativePath/RelativePath.hh
RelativePath.cc==%RelativePath/RelativePath.cc

%FileName==()+cmd=(../hcp-split) -l 2 (FileName.hcp) 'FileName.hh' 'FileName.cc':output

FileName.hh==%FileName/FileName.hh
FileName.cc==%FileName/FileName.cc

%Namespace==()+cmd=(../hcp-split) -l 2 (Namespace.hcp) 'Namespace.hh' 'Namespace.cc':output

Namespace.hh==%Namespace/Namespace.hh
Namespace.cc==%Namespace/Namespace.cc

%test-Namespace==(test-Namespace.cc)+(%cxx-opts):auto.cxx.exe


%splitSymbol==()+cmd=(../hcp-split) -l 2 (splitSymbol.hcp) 'splitSymbol.hh' 'splitSymbol.cc':output

splitSymbol.hh==%splitSymbol/splitSymbol.hh
splitSymbol.cc==%splitSymbol/splitSymbol.cc

%test-splitSymbol==(test-splitSymbol.cc)+(%cxx-opts):auto.cxx.exe


%augmentRootNamespace==()+cmd=(../hcp-split) -l 2 (augmentRootNamespace.hcp) 'augmentRootNamespace.hh' 'augmentRootNamespace.cc':output

augmentRootNamespace.hh==%augmentRootNamespace/augmentRootNamespace.hh
augmentRootNamespace.cc==%augmentRootNamespace/augmentRootNamespace.cc

%test-augmentRootNamespace==(test-augmentRootNamespace.cc)+(%cxx-opts):auto.cxx.exe


%tests.tree==<<
()+cmd=(%test-Namespace):exec.output
()+cmd=(%test-splitSymbol):exec.output
()+cmd=(%test-augmentRootNamespace)+cmd=(../test-hcp-tags/test-1.json):exec.output
